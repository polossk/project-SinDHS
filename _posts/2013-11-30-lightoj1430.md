---
layout: post
title: "LightOJ 1430 A Question of Time 表盘时间计算问题"
date: 2013-11-30 15:44:19 +0800
categories: contest math
tags: acmicpc lightoj
---
题目地址<a title="LightOJ 1430" href="http://lightoj.com/volume_showproblem.php?problem=1430" target="_blank">-></a>

题目意思是输入三个时间，以第一个时间的时针所在直线为对称轴，在其余两个时间表示的时间段内找到一个时间，使得该时间的分针和时针关于对称轴对称。

结果可能出现分数，不过应该只有13为底的分数，需要注意下的是时间00:00:00，对称轴时针的反向延长线，测试数据组数很大。主要是计算比较麻烦，而且又有一个分数表达，所以就直接上分数类了。提前在草稿纸上写好公式就行了。

Code Here

{% highlight cpp %}
#include <iostream>
#include <string>
#include <cstdio>
#include <cstring>
#include <set>
using namespace std;

inline int rdi(){int d; scanf("%d", &d); return d;}

const int S = 12*60*60;

struct Frac {
	int n, d;
	Frac(int nn=0, int dd=1): n(nn), d(dd) {}
	bool operator<=(Frac r)const { return n*r.d<=r.n*d; }
	bool operator<(Frac r) const { return n*r.d< r.n*d; }
	Frac operator+(Frac r) const { return Frac(n*r.d+r.n*d, d*r.d); }
	Frac operator-(Frac r) const { return Frac(n*r.d-r.n*d, d*r.d); }
	Frac operator*(Frac r) const { return Frac(n*r.n      , d*r.d); }
	Frac operator/(Frac r) const { return Frac(n*r.d      , d*r.n); }
}axis, raxis, be, ed;
set<Frac> ans;
set<Frac>::iterator it;
istream& operator>>(istream& is, Frac& t) {
	int h, m, s;
	scanf("%d:%d:%d", &h, &m, &s);
	t = Frac(h*3600+m*60+s);
	return is;
}
ostream& operator<<(ostream& os, const Frac& t) {
	printf("%02d:%02d:%02d", (int)(t.n/(t.d*3600)), (int)(t.n/(t.d*60)%60), (int)(t.n/t.d%60));
	if(t.n % t.d) printf(" %d/%d", (int)(t.n%t.d), (int)t.d);
	puts("");
	return os;
}
void update_ans(Frac t){
	if(be<=t && t<=ed) ans.insert(t);
}

int main(){
	int tt = 0, T;
	scanf("%d", &T);
	while (T--){
		int h, m, s;
		scanf("%d:%d:%d", &h, &m, &s);
		axis = Frac(h*3600+m*60+s);
		scanf("%d:%d:%d", &h, &m, &s);
		be = Frac(h*3600+m*60+s);
		scanf("%d:%d:%d", &h, &m, &s);
		ed = Frac(h*3600+m*60+s);
		ans.clear();
		raxis = Frac(axis.n<(S>>1)?axis.n+(S>>1):axis.n-(S>>1));
		for (int ht = 0; ht <= 12; ++ht){
			update_ans(( axis*2-ht*3600)/13+ht*3600);
			update_ans((raxis*2-ht*3600)/13+ht*3600);
		}
		printf("Case %d: %dn", ++tt, (int)(ans).size());
		for(it = ans.begin(); it != ans.end(); ++it)cout << *it;
	}
	return 0;
}{% endhighlight %}
