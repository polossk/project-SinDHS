---
layout: post
title: "UVa 537 Artificial Intelligence? 基础字符串“智能”处理入门题"
date: 2013-10-25 23:16:43 +0800
categories: contest string
tags: acmicpc uva basicstring
---
题目地址<a title="UVa 537" href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=96&page=show_problem&problem=478" target="_blank">-></a>

这是一个入门的“智能数据处理”的题目，要从输入的字符串中把关键数据提取出来，然后再智能的处理。充分的体现了字符串题目的两个特点：

麻烦！细节多！

然后就没有然后了，慢慢的撸吧，数据比较弱，没有数据上“张冠李戴”类型的陷阱，所以基本上是很好过的。

具体可以看一下我的代码，我把每个过程都分开写了，命名规则尽量满足“见其名知其意”。

Code Here

{% highlight cpp %}
/****
	*@PoloShen
	*Title:
	*/
//#pragma comment(linker, "/STACK:1024000000,1024000000")
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <string>
#include <cstring>
#include <cmath>
using namespace std;

#include <vector>
#include <list>
#include <stack>
#include <deque>
#include <queue>

double p, u, i;
const char Concept[3] = {'P', 'U', 'I'};
const char Unit[3] = {'W', 'V', 'A'};

struct question{
	char Name;
	double Value;
	question(){Name = '';Value = -1;}
};
question telled[2];

void SetUpDataField(string& buf){
	int sz = buf.size();
	int quesnum = 0;
	for (int i = 0; i < sz; i++){
		for (int quesflag = 0; quesflag < 3; quesflag++){
			if (buf[i] == Concept[quesflag]){
				telled[quesnum].Name = buf[i];
				char sbuf[20];memset(sbuf, '', sizeof(sbuf));
				int iter = i + 2, j;//+2的意思是把指针后移两位，这样就把等号“=”也一并不用考虑了
				for (j = 0; !isalpha(buf[iter + j]); j++){
					sbuf[j] = buf[iter + j];
				}
				sscanf(sbuf, "%lf", &telled[quesnum].Value);
				switch (buf[iter + j]){
					case 'm':{telled[quesnum].Value /= 1000;break;}
					case 'k':{telled[quesnum].Value *= 1000;break;}
					case 'M':{telled[quesnum].Value *= 1000000;break;}
					default :break;
				}
				if (telled[quesnum].Value != -1)quesnum++;
			}
		}
		if (quesnum == 2)break;
	}
	return;
}

double Calu(int& ansflag){
	bool aflag[3];
	memset(aflag, 0, sizeof(aflag));
	for (int i = 0; i < 2; i++){
		for (int j = 0; j < 3; j++){
			if (telled[i].Name == Concept[j]){
				aflag[j] = 1;
			}
		}
	}
	for (int i = 0; i < 3; i++){
		if (aflag[i] == 0){
			ansflag = i;
			break;
		}
	}
	double ans = 0;
	switch(ansflag){
		case 0:{ans = telled[0].Value * telled[1].Value;break;}
		case 1:{
			double num1 = (telled[0].Name == 'P')? telled[0].Value: telled[1].Value;
			double num2 = (telled[0].Name == 'I')? telled[0].Value: telled[1].Value;
			ans = num1 / num2;
			break;
		}
		case 2:{
			double num1 = (telled[0].Name == 'P')? telled[0].Value: telled[1].Value;
			double num2 = (telled[0].Name == 'U')? telled[0].Value: telled[1].Value;
			ans = num1 / num2;
			break;
		}
		default :break;
	}
	return ans;
}

void Print(int casenum, int ansflag, double ans){
	printf("Problem #%dn", casenum);
	printf("%c=%.2lf%cn", Concept[ansflag], ans, Unit[ansflag]);
	printf("n");
	return;
}

void Solve(int casenum){
	int ansflag = 0;
	string buf;getline(cin, buf);
	SetUpDataField(buf);
	double ans = Calu(ansflag);
	Print(casenum, ansflag, ans);
}

int main(){
	int T, tt = 0;
	scanf("%d", &T);
	getchar();//消除回车
	while (T--){
		Solve(++tt);
	}
    return 0;
}
{% endhighlight %}
