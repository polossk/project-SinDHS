---
layout: post
title: "HDU 4891 The Great Pan 多校训练第三场1005"
date: 2014-07-29 23:54:08 +0800
categories: contest string
tags: acmicpc hdu basicstring
---
题解

首先给自己跪了。又是姿势正确大家都对自己WA的节奏。。。

然后我以为是题意理解错误呢，就去问裁判，结果。。。

我的智商也就到这了。。。

总结一下，题意是理解正确的，这是毋庸置疑的。但是可能大家错在了，即便是int64去乘，也有可能出现超出范围。所以我索性加了一个判断，如果超过了，就不乘了。

代码示例

{% highlight cpp %}
// <!--encoding UTF-8 UTF-8编码--!>
/*****************************************************************************
*----Stay Hungry Stay Foolish----
*@author    :   Shen
*@name      :   E
******************************************************************************/

#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

typedef long long int64;
const int MaxL = 2000005;
const int64 MD = 100000LL;
int n;
char data[MaxL], line[MaxL];
#define update if (isdoge == 0 && ans > MD) isdoge = 1;

void solve()
{
    getchar();                  // 消除空格
    bool isdoge = 0;            // 是否输出doge
    int64 ans = 1LL;            // 答案
    int64 nu$ = 0LL, nu_ = 0LL; // 空格数量，竖线数量
    int l = 0, len = 0;
    for (int i = 0; i < n; i++)
    {
        gets(line); l = strlen(line);
        copy(line, line + l, data + len);
        len  = l;
    }
    for (int i = 0; i < len; i+)
    {
        if (data[i] == '{')
        {
            nu_ = 0LL; i++;
            while (data[i] != '}') { if (data[i] == '|') nu_++; i++; }
            ans *= nu_ + 1; update;
        }
        else if (data[i] == '$')
        {
            nu$ = 0LL; i++;
            for ( ; data[i] != '$'; i++)
                if (data[i] == ' ') nu$  ;
                else { ans *= nu$ + 1; nu$ = 0; update; }
            ans *= nu$ + 1; update;
        }
    }
    if (isdoge) puts("doge");
    else printf("%I64d\n", ans);
}

int main()
{
    while (~scanf("%d", &n)) solve();
    return 0;
}
{% endhighlight %}
